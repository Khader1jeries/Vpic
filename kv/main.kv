BoxLayout:
    orientation: 'horizontal'

    # Vertical navbar - Shows different content based on project selection status
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: None
        width: "150dp"
        spacing: "10dp"
        padding: "10dp"
        canvas.before:
            Color:
                rgba: 0.2, 0.3, 0.4, 1  # Dark blue-gray color
            Rectangle:
                pos: self.pos
                size: self.size

        # App title (always visible)
        Label:
            text: "VPic"
            size_hint_y: None
            height: "50dp"
            font_size: "24sp"
            bold: True
            color: 1, 1, 1, 1

        # Project name (always visible)
        Label:
            text: app.current_project if app.current_project else "No Project Selected"
            size_hint_y: None
            height: "30dp"
            font_size: "14sp"
            color: 0.9, 0.9, 0.9, 1

        # Navigation buttons - only visible when a project is selected
        BoxLayout:
            orientation: 'vertical'
            spacing: "10dp"
            opacity: 1 if app.current_project else 0
            height: 0 if not app.current_project else self.minimum_height
            size_hint_y: None if not app.current_project else 1
            disabled: not app.current_project

            Button:
                text: "Home"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'home'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
            Button:
                text: "Voting"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'voting'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
            Button:
                text: "Albums"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'albums'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
            Button:
                text: "Statistics"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'statistics'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
            Button:
                text: "Upload"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'upload'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
            Button:
                text: "Settings"
                background_color: 0.3, 0.4, 0.5, 1
                background_normal: ''
                on_press: app.root.ids.screen_manager.current = 'settings'
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"

            Widget:
                # Spacer
                size_hint_y: 1

        # Content shown when no project is selected
        BoxLayout:
            orientation: 'vertical'
            opacity: 0 if app.current_project else 1
            height: 0 if app.current_project else self.minimum_height
            size_hint_y: None
            disabled: app.current_project

            Label:
                text: "Please select or create a project to get started"
                size_hint_y: None
                height: "80dp"
                text_size: self.width, None
                halign: 'center'
                valign: 'middle'

            Button:
                text: "Select Project"
                background_color: 0.3, 0.5, 0.7, 1
                background_normal: ''
                size_hint_y: None
                height: "45dp"
                font_size: "16sp"
                on_press: app.root.ids.screen_manager.current = 'project_selection'

            Widget:
                # Spacer
                size_hint_y: 1

        # Project management button (always visible)
        Button:
            text: "Change Project" if app.current_project else "Select Project"
            background_color: 0.4, 0.4, 0.5, 1
            background_normal: ''
            on_press: app.root.ids.screen_manager.current = 'project_selection'
            size_hint_y: None
            height: "45dp"
            font_size: "14sp"

    # Main content area
    ScreenManager:
        id: screen_manager

        ProjectSelectionScreen:
            name: 'project_selection'

        HomeScreen:
            name: 'home'

        VotingScreen:
            name: 'voting'

        AlbumsScreen:
            name: 'albums'

        StatisticsScreen:
            name: 'statistics'

        UploadScreen:
            name: 'upload'

        ImgDescriptionScreen:
            name: 'img_description'

        ImgTagsScreen:
            name: 'img_tags'

        UploadCompleteScreen:
            name: 'upload_complete'

        SettingsScreen:
            name: 'settings'

<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20

        Label:
            text: f"Home Screen - Current Project: {app.current_project}"
            font_size: '24sp'
            size_hint_y: None
            height: '50dp'

        Widget:
            # Content area

<VotingScreen>:
    BoxLayout:
        Label:
            text: "Voting Screen"

<StatisticsScreen>:
    BoxLayout:
        Label:
            text: "Statistics Screen"

<SettingsScreen>:
    BoxLayout:
        Label:
            text: "Settings Screen"